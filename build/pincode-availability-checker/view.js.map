{"version":3,"file":"pincode-availability-checker/view.js","mappings":"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","sources":["webpack://pincode-availability-checker/./src/pincode-availability-checker/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * If you're not making any changes to this file because your project doesn't need any\n * JavaScript running in the front-end, then you should delete this file and remove\n * the `viewScript` property from `block.json`.\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\n/** \ndocument.addEventListener('DOMContentLoaded', () => {\n    document.querySelectorAll('.pincode-checker-block').forEach(block => {\n        const input = block.querySelector('.pincode-input');\n        const button = block.querySelector('.pincode-submit');\n        const message = block.querySelector('.pincode-message');\n\n        // Get cookie\n        const saved = getCookie('user_pincode');\n        if (saved) input.value = saved;\n\n        button.addEventListener('click', async () => {\n            const pincode = input.value.trim();\n            if (!pincode) {\n                message.textContent = 'Please enter a pincode.';\n                return;\n            }\n            setCookie('user_pincode', pincode, 30);\n\n            const resp = await fetch('/wp-json/pincode-checker/v1/check', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ pincode })\n            });\n            const result = await resp.json();\n            message.textContent = result.message;\n        });\n    });\n\n    function getCookie(name) {\n        const nameEQ = name + '=';\n        const ca = document.cookie.split(';');\n        for (let c of ca) {\n            c = c.trim();\n            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length);\n        }\n        return null;\n    }\n\n    function setCookie(name, value, days) {\n        const d = new Date();\n        d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);\n        document.cookie = `${name}=${value}; expires=${d.toUTCString()}; path=/`;\n    }\n});\n\n*/ \n\ndocument.addEventListener('DOMContentLoaded', () => {\n    document.querySelectorAll('.pincode-checker-block').forEach(block => {\n        const input = block.querySelector('.pincode-input');\n        const button = block.querySelector('.pincode-submit');\n        const message = block.querySelector('.pincode-message');\n\n        // Get saved pincode\n        const saved = getCookie('user_pincode');\n        if (saved) {\n            input.value = saved;\n            checkPincode(saved); // Automatically check it\n        }\n\n        button.addEventListener('click', () => {\n            const pincode = input.value.trim();\n            if (!pincode) {\n                message.textContent = 'Please enter a pincode.';\n                return;\n            }\n            setCookie('user_pincode', pincode, 30);\n            checkPincode(pincode);\n        });\n\n        function checkPincode(pincode) {\n            message.textContent = 'Checking availability...';\n            fetch('/wp-json/pincode-checker/v1/check', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ pincode })\n            })\n                .then(response => response.json())\n                .then(result => {\n                    message.textContent = result.message;\n                    message.style.color = result.available ? 'green' : 'red';\n                })\n                .catch(() => {\n                    message.textContent = 'Error checking pincode.';\n                    message.style.color = 'red';\n                });\n        }\n    });\n\n    function getCookie(name) {\n        const nameEQ = name + '=';\n        const ca = document.cookie.split(';');\n        for (let c of ca) {\n            c = c.trim();\n            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length);\n        }\n        return null;\n    }\n\n    function setCookie(name, value, days) {\n        const d = new Date();\n        d.setTime(d.getTime() + days * 24 * 60 * 60 * 1000);\n        document.cookie = `${name}=${value}; expires=${d.toUTCString()}; path=/`;\n    }\n});\n\n"],"names":["document","addEventListener","querySelectorAll","forEach","block","input","querySelector","button","message","saved","getCookie","value","checkPincode","pincode","trim","textContent","setCookie","fetch","method","headers","body","JSON","stringify","then","response","json","result","style","color","available","catch","name","nameEQ","ca","cookie","split","c","indexOf","substring","length","days","d","Date","setTime","getTime","toUTCString"],"sourceRoot":""}